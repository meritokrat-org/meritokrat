!function(){"use strict";function e(){i.$container=r,i.iBridge=new n,window.zz=i}function t(e,t){if(void 0===t){if(!r.hasOwnProperty(e))throw console.error("[ERROR]: service isn't defined yet.",e);return r[e]instanceof Function&&(r[e]=new r[e]),r[e]}if(!(t instanceof Function))throw console.error("[ERROR]: Can't register service",t);return r[e]=t,i}function n(){function e(){return window.addEventListener("message",function(e){var t=e.data;t instanceof Object&&t.hasOwnProperty("zzToken")&&a.receive(t)},!1),c.length>0?t():void n()}function t(){o=s.attr({width:"100%",height:"0",scrolling:"no",frameborder:0,sandbox:["allow-forms","allow-scripts","allow-same-origin","allow-top-navigation"].join(" "),src:function(e,t){if(!e)throw console.error("[ERROR] ...");return"&1://&2/zz/app#".replace(/&(\d)/g,function(t,n){return e[n]})+t}.call(null,/(\w+):\/\/([\w\.]+)\//gi.exec(c.attr("src")),c.attr("zz-url"))}).insertAfter(c).get(0).contentWindow}function n(){o=window.parent}function i(e){var t=/(\w+)\.(\w+)/g.exec(e.service);if(!t)throw console.log("[ERROR]: ...");l[t[1]][t[2]].apply(a,e.inject)}function r(e){o.postMessage(Object.assign(e||{},{zzToken:"@"}),"*")}var o,a=this,c=$("script[zz-url]"),s=$("<iframe />"),l={iframe:{setSize:function(e,t){void 0!==e&&s.width(e),void 0!==t&&s.height(t)}},location:{href:function(e){window.location=e}},team:{avatar:function(e){$("div#bridgeTeamAvatar > img").attr("src","http://image."+window.location.host+e)}},profile:{loadParts:function(e){$.get("/team/profile",{id:e},function(t){window.history.pushState("team"+e,t.title,"/team"+e+"/"),$('div[square="avatar"]').html(t.avatar),$('div[square="leads"]').html(t.leads),$('div[square="members"]').html(t.members),$('div[square="invite"]').html(1===t.team.category?t.invite:""),null!==t.members?$('div.tab_pane > a[rel="members"]').show().click():$('div.tab_pane > a[rel="members"]').hide().next().click()},"json")}}};a.receive=i,a.send=r,e()}var i={},r={};i.service=t,e()}();